<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>No Show API Example</title>

        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
              integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

        <script src="https://pilot.datatrans.biz/showcase/libs/sha256.js"></script>
        <script>
            function calculateSign() {
              var salt = document.getElementById('salt').value;
              var merchantId = document.getElementById('merchantId').value;
              var aliasCC = document.getElementById('aliasCC').value;
              var hash = CryptoJS.SHA256(salt+merchantId+aliasCC);
              document.getElementById('sign').value = hash;
              var username = document.getElementById('username').value;
            }
        </script>
    </head>
    <body onload="calculateSign()">

      <div class="container" id="content" tabindex="-1">
        <h4>Convert a token back into a credit card number</h4>

        <!-- using GET here so that the browser URL bar shows the query params
              for easy copy pasting =) -->
        <form action="https://pilot.datatrans.biz/upp/jsp/noShow.jsp" method="get">

          <div class="form-group row">
            <div class="col-xs-3">
              <label for="merchantId">merchantId</label>
              <input type="text" class="form-control" id="merchantId" name="merchantId" placeholder="merchantId" value="1100005007">
            </div>
          </div>

          <div class="form-group row">
            <div class="col-xs-3">
              <label for="aliasCC">aliasCC</label>
              <input type="text" class="form-control" id="aliasCC" name="aliasCC" placeholder="aliasCC" value="424242SKMPRI4242">
            </div>
          </div>

          <div class="form-group row">
              <div class="col-xs-3">
                <label for="aliasCVV">aliasCVV</label>
                <p class="help-block">Create one <a target="_blank" href="https://pilot.datatrans.biz/upp/jsp/upStart.jsp?uppAliasOnly=yes&merchantId=1000011011&amount=1000&currency=CHF&refno=800381&sign=30916165706580013&paymentmethod=VIS&aliasCC=70119122433810042&expm=12&expy=18&cvv=123">here.</a></p>
                <input type="text" class="form-control" id="aliasCVV" name="aliasCVV" placeholder="aliasCVV">
              </div>
          </div>

          <div class="form-group row">
              <div class="col-xs-7">
                <label for="salt">salt</label>
                <div class="input-group">
                  <!-- not giving a name because we don't want to post the salt to the server -->
                  <input type="text" class="form-control" id="salt" placeholder="salt" value="V3hmMm29gD35OVHWDSAYKBIBCRg0znRekNvGbM9d8I4GRgfIcs">
                  <div class="input-group-btn">
                    <button type="button" class="btn btn-primary" onclick="calculateSign()">Calculate sign</button>
                  </div>
                </div>
              </div>
          </div>
          <p class="help-block">You can get the Salt value from: Webadmin --> UPP Administration --> Security --> Other services</p>

          <div class="form-group row">
            <div class="col-xs-7">
              <label for="sign">sign</label>
              <p class="help-block">Click the 'Calculate sing' button above!</p>
              <input type="text" class="form-control" id="sign" name="sign" placeholder="sign" value="" readonly="readonly">
            </div>
          </div>
            
          <div class="form-group row">
            <div class="col-xs-3">
              <label for="username">username</label>
              <input type="text" class="form-control" id="username" name="username" placeholder="username" value="max.mustermann&#x40yourcompany.com">
            </div>
          </div>

          <button type="submit" class="btn btn-success">Send request</button>

        </form>

    </div>

    </body>
</html>
